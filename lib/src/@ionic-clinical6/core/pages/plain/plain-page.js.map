{"version":3,"sources":["../src/@ionic-clinical6/core/pages/plain/plain-page.ts"],"names":[],"mappings":"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","file":"plain-page.js","sourcesContent":["import { Component } from '@angular/core';\nimport { NavController, NavParams } from 'ionic-angular';\nimport { ViewController, AlertController } from 'ionic-angular';\n\nimport { DomSanitizer, SafeHtml} from '@angular/platform-browser';\nimport { AppConfig } from '../../config';\nimport { Clinical6Service } from '../../clinical6.service';\nimport { TranslatorService } from '../../translator/translator.service';\n\n@Component({\n  selector: 'plain-page',\n  templateUrl: 'plain-page.html'\n})\nexport class PlainPage {\n    title: string = \"\";\n    _body: string = \"\";\n    permLink: string;\n    isLoading: boolean = true;\n    constructor(\n      public translator: TranslatorService,\n      public appConfig: AppConfig,\n      public c6Service: Clinical6Service,\n      public nav: NavController,\n      public navParams: NavParams,\n      public viewCtrl: ViewController,\n      public alertCtrl: AlertController,\n      public _sanitizer: DomSanitizer) {\n\n      if (navParams.get('page')) {\n        this.title = navParams.get('page').title || \"\";\n        this._body = navParams.get('page').body_content || \"\";\n      }\n      this.permLink = navParams.get('permanent_link');\n\n    }\n    public get body(): SafeHtml {\n       return this._sanitizer.bypassSecurityTrustHtml(this._body);\n    }\n\n    ngOnInit() {\n        if (this.permLink) this.getContents();\n    }\n    getContents() {\n      if (this.appConfig[this.permLink]) {\n        this.isLoading = false;\n        this.parseRemoteContents();\n        return;\n      }\n      \n      this.isLoading = true;\n      this.c6Service.getDynamicContent(this.permLink)\n      .then( result => {\n        this.retrievedContentCallback(result);\n\n        this.isLoading = false;\n        this.parseRemoteContents();\n\n\n        }).catch(e => {\n        this.isLoading = false;\n        console.error('get Plain page error:', e);\n        let alert = this.alertCtrl.create({\n            title: 'Connection Error',\n            subTitle: 'Unable to retrieve information from Server. Please check your connection and try again later.',\n            buttons: [\n            {\n                text: 'Ok',\n                handler: data => {\n                this.nav.pop();\n                }\n            }\n            ]\n        });\n        alert.present();\n        });\n    }\n    /**\n     * This Callback is called when the dynamic content is retrieved.\n     * Override this in case you need to customize data retrieval/storage\n     * @param result\n     */\n    retrievedContentCallback(result: any) {\n      this.appConfig[this.permLink] = result[0];      \n    };\n    \n    parseRemoteContents() {\n      var contents = this.appConfig[this.permLink];\n\n      this.title = contents.title;\n\n\n      if (contents['description']) this._body = contents['description'];\n      if (contents['richText']) this._body = contents['richText'];\n      if (contents['rich_text']) this._body = contents['rich_text'];\n      if (contents['rich_description']) this._body = contents['rich_description'];\n      if (contents['richDescription']) this._body = contents['richDescription'];\n    }\n}"]}