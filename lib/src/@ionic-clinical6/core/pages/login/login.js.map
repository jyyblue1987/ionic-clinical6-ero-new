{"version":3,"sources":["../src/@ionic-clinical6/core/pages/login/login.ts"],"names":[],"mappings":"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","file":"login.js","sourcesContent":["/* globals Clinical6 */\nimport { Component, ElementRef, ViewChildren, QueryList } from '@angular/core';\nimport { NavController, NavParams, Alert, LoadingController, AlertController, Platform } from 'ionic-angular';\nimport { Clinical6Service } from '../../clinical6.service';\n// import { AppService, StudyInfo, AppState, MobileUserInfo, SiteInfo } from '../../shared/ppd/';\n// import { DashboardPage } from '../dashboard/dashboard';\nimport { PinPage } from '../pin/pin';\nimport { PlainPage } from '../plain/plain-page';\nimport { Flows } from '../../flow_process/flow-factory';\n\nimport { Modal, ModalController, TextInput } from 'ionic-angular';\nimport { clinical6, Flow, flowService } from 'clinical6';\nimport { AlertModalPage } from '../../modal/alert-modal';\nimport { LoginWithPinPage } from '../login-with-pin/login-with-pin';\nimport { Keyboard } from '@ionic-native/keyboard';\nimport { BasePage } from '../base/base-page';\nimport { AppState, AppConfig } from '../../config';\nimport { TranslatorService } from '../../translator/translator.service';\n\n// import { MOBILE_USER_DEMO } from '../../shared/mocks/';\n\n\n@Component({\n  selector: 'login-page',\n  templateUrl: 'login.html'\n})\nexport class LoginPage extends BasePage {\n  flow: Flow;\n  apiBaseUrl: string;\n\n  userId: string;\n  siteId: string;\n\n  _title: string = '';\n  _body: string = '';\n  _nextText: string = '';\n  _helpText: string = '';\n\n  privacy_page_link: string = 'privacy_page';\n  terms_page_link: string = 'terms_page';\n  loadingCtrl: any;\n  isNavigating: boolean = false;\n  showBackButton: boolean = false;\n\n  inputs: any = [];\n\n  // @ViewChildren(TextInput) inputItems: QueryList<TextInput>;\n\n  ///////////////\n  // Demo data\n\n  demoUserStatus = 'new';  // ['active' | 'not_invited' | 'new' | 'invalid']\n  //////////////\n\n  owner: number;\n\n  constructor(\n    public platform: Platform,\n    public elementRef: ElementRef,\n    // public appService: AppService,\n    public c6LibService: Clinical6Service,\n    public loader: LoadingController,\n    public alertCtrl: AlertController,\n    public modalCtrl: ModalController,\n    public navParams: NavParams,\n    public nav: NavController,\n    public keyboard: Keyboard,\n    public translator: TranslatorService,\n    ) {\n\n    super(platform, elementRef);\n    this.apiBaseUrl = clinical6.apiBaseUrl;\n\n    this.showBackButton = this.navParams.get('goBack') || false;\n  }\n\n  getInputs() {\n    return this.inputs;\n  }\n\n  get title() {\n    return this._title;\n  }\n\n  set title(text: string) {\n    this._title = text;\n  }\n\n  get body() {\n    return this._body;\n  }\n\n  set body(text: string) {\n    this._body = text;\n  }\n\n  get helpText() {\n    return this._helpText;\n  }\n\n  set helpText(text: string) {\n    this._helpText = text;\n  }\n\n  get nextText() {\n    return this._nextText;\n  }\n\n  set nextText(text: string) {\n    this._nextText = text;\n  }\n\n  addInput(type: string, label: string) {\n    this.inputs.push({ type: type, label: label, id: '' });\n  }\n\n  /*\n    Remove an input from the inputs list with the provided label value.\n  */\n  removeInput(label: string) {\n    let index = this.inputs.map((input) => input.label).indexOf(label);\n    if (index > -1) {\n      this.inputs.splice(index, 1);\n    }\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n    // this.keyboard.hideKeyboardAccessoryBar(false);\n  }\n\n  ionViewDidLoad() {\n    // for speed reason, load the flow when loading this page\n    this.loadInitFlow();\n  }\n\n  ionViewWillEnter() {\n    this.isNavigating = false;\n    // if (this.siteId !== '') this.doLogin();\n  }\n\n  loadInitFlow() {\n    /* if (this.appService.demoMode) { // TODO we should move this to the ppd service\n      this.flow = INITFLOW();\n      return;\n    } */\n\n    flowService.getFlow('verify_information')\n      .then(flow => this.flow = flow)\n      .catch(reason => this.showError(null, 'Server error', 'Details: ' + reason));\n  }\n\n  // add method instead of template function\n  doneCallback() {\n    this.doLogin();\n  }\n\n  /**\n   * This is a placeholder doLogin function to be overridden by the extending app\n   */\n  doLogin() {\n\n    if (!this.isNavigating) {\n      this.isNavigating = true;\n\n      // implement systemService.xAuth();\n      this.isNavigating = false;\n    }\n  }\n\n  goToInitialFlow(status: string) {\n    var self = this;\n\n    // based on status, go to different page\n    switch (status) {\n      case 'new': // 3. RETURNING USER (= USER ALREADY LOGGED IN AT LEAST ONCE) + PIN NOT CREATED YET\n        if (self.flow.first) {\n          self.flow.end = (step) => {\n            // Setup new PIN\n            self.nav.push(PinPage, AppConfig.animationOpt); // , {'authToken' : result.token});\n          };\n          self.nav.push(Flows.Factory(self.flow.first.content_type), { step: self.flow.first }, AppConfig.animationOpt);\n        }\n        else {\n          self.showError(null, 'Server error', 'Details: received flow is inconsistent.');\n        }\n        break;\n      case 'active':\n        this.nav.push(LoginWithPinPage, AppConfig.animationOpt);\n        break;\n      case 'invalid':\n        this.isNavigating = false;\n        this.showError(\n          null,\n          'Invalid',\n          `The User ID or the Site ID is an invalid combination.\n            Please contact the Passport Facilitator to setup a User ID\n            and send an invite for the entered Site ID.`);\n        break;\n      case 'not_invited':\n        this.isNavigating = false;\n        this.showError(\n          'Sorry No Access at this Time',\n          'Please wait for Approval',\n          '<br>Thank you for downloading the app, at this time we ask that \\\n          you wait for your Physician to approve your access to the PPD Trial Passport. \\\n          <br><br>Please try again later.');\n        break;\n      default:\n        console.error('Received unrecognized status information: ' + status);\n    }\n  }\n\n  showError(title: string = 'Error', errorSubTitle: string, errorText: string) {\n    AlertModalPage.show(this, { type: 'type_error', title: title, body: errorText, subTitle: errorSubTitle, cancelCallback: () => { } });\n  }\n\n  showHelp() {\n    const self = this;\n    AlertModalPage.show(\n      self, {\n        type: 'type_info',\n        body: `Providing your Site ID and User ID will help to confirm your identity.\n              If you have any questions about your Site ID and User ID,\n              please contact your Passport Facilitator.`,\n        subTitle: 'Verification',\n        title: 'Help',\n        cancelCallback: () => { }\n      });\n  }\n  showAlert(title: string, message: string) {\n    let alert = this.alertCtrl.create({\n      title: title,\n      message: message,\n      cssClass: 'pin-alert',\n      buttons: [\n        {\n          text: this.translator.getInnerHTML('POPUP_OK') || 'OK',\n        }\n      ]\n    });\n    alert.present();\n  }\n\n  goToTerms() {\n    if (!this.isNavigating) {\n      this.isNavigating = true;\n      this.goToPlainPage(this.terms_page_link);\n    }\n  }\n\n  goToPrivacyPolicy() {\n    if (!this.isNavigating) {\n      this.isNavigating = true;\n      this.goToPlainPage(this.privacy_page_link);\n    }\n  }\n\n  goToPlainPage(target: string) {\n    // shows a loading control while data is being gathered\n    this.loadingCtrl = this.loader.create({ content: 'Loading...' });\n    this.loadingCtrl.present();\n\n    var thisRef = this;\n    this.c6LibService.getDynamicContent('resources')\n      .then(response => {\n        var content = response['content'].find((resource) => { return resource.api_key === target; });\n        if (content) {\n          thisRef.loadingCtrl.dismiss();\n          thisRef.nav.push(PlainPage, { page: content }, AppConfig.animationOpt);\n        }\n        else {\n          thisRef.loadingCtrl.dismiss()\n            .then(() => {\n              thisRef.showError(null, 'Unable to retrieve data from server',\n                'Please contact PPD support for further information.');\n            });\n          console.log('Login: retrieveContent error (' + target + ' not found on server)');\n        }\n\n      }).catch(e => {\n        thisRef.loadingCtrl.dismiss()\n          .then(() => {\n            thisRef.showError(null, 'Unable to retrieve data from server',\n              'Please make sure you have a working network connection.');\n          });\n        console.log('Login: retrieveContent error (' + target + ')' + e.message);\n      });\n  }\n  // isFooterVisible() {\n  //   return !(this.appService.isKeyboardUp && this.platform.is('android'));\n  // }\n\n  handleKey(event: KeyboardEvent) {\n    super.handleKey(event);\n    if (event.keyCode === 13 && this.userId !== '' && this.siteId !== '') {\n      this.doLogin();\n    }\n  }\n}\n"]}